exports.id=362,exports.ids=[362],exports.modules={93739:()=>{},35367:(e,r,s)=>{Promise.resolve().then(s.bind(s,6047)),Promise.resolve().then(s.t.bind(s,15889,23)),Promise.resolve().then(s.t.bind(s,34080,23))},96116:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,63642,23)),Promise.resolve().then(s.t.bind(s,87586,23)),Promise.resolve().then(s.t.bind(s,47838,23)),Promise.resolve().then(s.t.bind(s,58057,23)),Promise.resolve().then(s.t.bind(s,77741,23)),Promise.resolve().then(s.t.bind(s,13118,23))},11901:()=>{},6047:(e,r,s)=>{"use strict";s.d(r,{DropdownMenu:()=>d,DropdownMenuContent:()=>l,DropdownMenuItem:()=>u,DropdownMenuLabel:()=>m,DropdownMenuTrigger:()=>c});var t=s(97247),a=s(28964),o=s(65102),n=s(2095),i=s(25008);let d=o.fC,c=o.xz;o.ZA,o.Uv,o.Tr,o.Ee,a.forwardRef(({className:e,inset:r,children:s,...a},d)=>(0,t.jsxs)(o.fF,{ref:d,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",e),...a,children:[s,t.jsx(n.XCv,{className:"ml-auto h-4 w-4"})]})).displayName=o.fF.displayName,a.forwardRef(({className:e,...r},s)=>t.jsx(o.tu,{ref:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})).displayName=o.tu.displayName;let l=a.forwardRef(({className:e,sideOffset:r=4,...s},a)=>t.jsx(o.Uv,{children:t.jsx(o.VY,{ref:a,sideOffset:r,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));l.displayName=o.VY.displayName;let u=a.forwardRef(({className:e,inset:r,...s},a)=>t.jsx(o.ck,{ref:a,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",e),...s}));u.displayName=o.ck.displayName,a.forwardRef(({className:e,children:r,checked:s,...a},d)=>(0,t.jsxs)(o.oC,{ref:d,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...a,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(o.wU,{children:t.jsx(n.nQG,{className:"h-4 w-4"})})}),r]})).displayName=o.oC.displayName,a.forwardRef(({className:e,children:r,...s},a)=>(0,t.jsxs)(o.Rk,{ref:a,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(o.wU,{children:t.jsx(n.jXb,{className:"h-4 w-4 fill-current"})})}),r]})).displayName=o.Rk.displayName;let m=a.forwardRef(({className:e,inset:r,...s},a)=>t.jsx(o.__,{ref:a,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",e),...s}));m.displayName=o.__.displayName,a.forwardRef(({className:e,...r},s)=>t.jsx(o.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",e),...r})).displayName=o.Z0.displayName},25008:(e,r,s)=>{"use strict";s.d(r,{Xp:()=>n,cn:()=>o});var t=s(61929),a=s(35770);function o(...e){return(0,a.m6)((0,t.W)(e))}let n=e=>{if("number"==typeof e)return Math.round((e+Number.EPSILON)*100)/100;if("string"==typeof e)return Math.round((Number(e)+Number.EPSILON)*100)/100;throw Error("value is not a number nor a string")}},56712:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>D});var t=s(72051),a=s(89112);let o=()=>t.jsx("footer",{className:"border-t",children:(0,t.jsxs)("div",{className:"p-5 flex-center",children:["2024 ",a.iC,". All Rights reserved."]})});var n=s(59624),i=s(92349),d=s(1779),c=s(26269),l=s(96734),u=s(45994),m=s(37170);let f=(0,u.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),p=c.forwardRef(({className:e,variant:r,size:s,asChild:a=!1,...o},n)=>{let i=a?l.g7:"button";return t.jsx(i,{className:(0,m.cn)(f({variant:r,size:s,className:e})),ref:n,...o})});p.displayName="Button";var x=s(45347);let h=(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenu`),w=(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuTrigger`),g=(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuContent`),y=(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuItem`);(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuCheckboxItem`),(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuRadioItem`);let b=(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuLabel`);(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuSeparator`),(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuShortcut`),(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuGroup`),(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuPortal`),(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuSub`),(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuSubContent`),(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuSubTrigger`),(0,x.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuRadioGroup`);var N=s(23829);async function v(){let e=await (0,d.I8)();return e?t.jsx("div",{className:"flex gap-2 items-center",children:(0,t.jsxs)(h,{children:[t.jsx(w,{asChild:!0,children:t.jsx("div",{className:"flex items-center",children:t.jsx(p,{variant:"ghost",className:"relative w-8 h-8 rounded-full ml-2",children:e.user.name})})}),(0,t.jsxs)(g,{className:"w-56",align:"end",forceMount:!0,children:[t.jsx(b,{className:"font-normal",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[t.jsx("p",{className:"text-sm font-medium leading-none",children:e.user.name}),t.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.user.email})]})}),t.jsx(y,{className:"p-0 mb-1",children:t.jsx("form",{action:N.SignOut,className:"w-full",children:t.jsx(p,{className:"w-full py-4 px-2 h-4 justify-start",variant:"ghost",children:"Sign Out"})})})]})]})}):t.jsx(i.default,{href:"/api/auth/signin",children:t.jsx(p,{children:"Sign In"})})}var j=s(30811),I=s(20353),P=s(6001);async function C(){let e=await (0,P.getMyCart)();return t.jsx(p,{asChild:!0,variant:"ghost",children:(0,t.jsxs)(i.default,{href:"/cart",children:[t.jsx(j.Z,{className:"mr-1"}),"Cart",e&&e.items.length>0&&t.jsx(I.C,{className:"ml-1",children:e.items.reduce((e,r)=>e+r.qty,0)})]})})}let k=()=>t.jsx(t.Fragment,{children:t.jsx("div",{className:"flex justify-end gap-3",children:(0,t.jsxs)("nav",{className:"md:flex hidden w-full max-w-xs gap-1",children:[t.jsx(C,{}),t.jsx(v,{})]})})}),S=async()=>t.jsx("header",{className:"w-full border-b",children:(0,t.jsxs)("div",{className:"wrapper flex-between",children:[t.jsx("div",{className:"flex-start",children:(0,t.jsxs)(i.default,{href:"/",className:"flex-start",children:[t.jsx(n.default,{src:"/assets/icons/logo.svg",width:48,height:48,alt:`${a.iC} logo`}),a.iC]})}),t.jsx(k,{})]})});function D({children:e}){return(0,t.jsxs)("div",{className:"flex h-screen flex-col",children:[t.jsx(S,{}),t.jsx("main",{className:"flex-1 wrapper",children:e}),t.jsx(o,{})]})}},54403:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d,metadata:()=>i});var t=s(72051),a=s(28742),o=s.n(a);s(67272);var n=s(37170);s(26269);let i={title:"Create Next App",description:"Generated by create next app"};function d({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{className:(0,n.cn)("min-h-screen bg-background font-sans antialiased",o().variable),children:e})})}},1779:(e,r,s)=>{"use strict";s.d(r,{I8:()=>p,handlers:()=>f,w7:()=>h,zB:()=>x});var t=s(56513),a=s(17198),o=s(29785),n=s(35872),i=s(35957),d=s(9396),c=s(53117),l=s(52845),u=s(71309);let m={pages:{signIn:"/sign-in",error:"/sign-in"},session:{strategy:"jwt",maxAge:2592e3},adapter:(0,t.J)(d.Z),providers:[(0,i.Z)({credentials:{email:{type:"email"},password:{type:"password"}},async authorize(e){if(null==e)return null;let r=await d.Z.query.users.findFirst({where:(0,o.eq)(c.users.email,e.email)});return r&&r.password&&(0,a.oH)(e.password,r.password)?{id:r.id,name:r.name,email:r.email,role:r.role}:null}})],callbacks:{jwt:async({token:e,user:r,trigger:s,session:t})=>{if(r&&("signIn"===s||"signUp"===s)){let e=l.cookies().get("sessionCartId")?.value;if(!e)throw Error("Session Cart Not Found");let s=await d.Z.query.carts.findFirst({where:(0,o.eq)(c.carts.sessionCartId,e)});if(s&&!s.userId){let t=await d.Z.query.carts.findFirst({where:(0,o.eq)(c.carts.userId,r.id)});t?((0,l.cookies)().set("beforeSigninSessionCartId",e),(0,l.cookies)().set("sessionCartId",t.sessionCartId)):d.Z.update(c.carts).set({userId:r.id}).where((0,o.eq)(c.carts.id,s.id))}}return t?.user.name&&"update"===s&&(e.name=t.user.name),e},session:async({session:e,user:r,trigger:s,token:t})=>(e.user.id=t.sub,e.user.role=t.role,e.user.name=t.name,"update"===s&&(e.user.name=r.name),e),authorized({request:e,auth:r}){let{pathname:s}=e.nextUrl;if(!r&&[/\/shipping-address/,/\/payment-method/,/\/place-order/,/\/profile/,/\/user\/(.*)/,/\/order\/(.*)/,/\/admin/].some(e=>e.test(s)))return!1;if(e.cookies.get("sessionCartId"))return!0;{let r=crypto.randomUUID(),s=new Headers(e.headers),t=u.NextResponse.next({request:{headers:s}});return t.cookies.set("sessionCartId",r),t}}}},{handlers:f,auth:p,signIn:x,signOut:h}=(0,n.ZP)(m)},97768:(e,r,s)=>{"use strict";s.d(r,{Z:()=>o});var t=s(72051),a=s(37170);let o=({value:e,className:r})=>{let s=e.toString(),[o,n]=s.includes(".")?s.split("."):[s,""];return(0,t.jsxs)("p",{className:(0,a.cn)("text-2xl",r),children:[t.jsx("span",{className:"text-xs align-super",children:"US$"}),o,t.jsx("span",{className:"text-xs align-super",children:n})]})}},20353:(e,r,s)=>{"use strict";s.d(r,{C:()=>i});var t=s(72051);s(26269);var a=s(45994),o=s(37170);let n=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r,...s}){return t.jsx("div",{className:(0,o.cn)(n({variant:r}),e),...s})}},6669:(e,r,s)=>{"use strict";s.d(r,{Ol:()=>i,SZ:()=>c,Zb:()=>n,aY:()=>l,ll:()=>d});var t=s(72051),a=s(26269),o=s(37170);let n=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));n.displayName="Card";let i=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let d=a.forwardRef(({className:e,...r},s)=>t.jsx("h3",{ref:s,className:(0,o.cn)("font-semibold leading-none tracking-tight",e),...r}));d.displayName="CardTitle";let c=a.forwardRef(({className:e,...r},s)=>t.jsx("p",{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let l=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,o.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent",a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,o.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},9396:(e,r,s)=>{"use strict";s.d(r,{Z:()=>n});var t=s(53117),a=s(60713),o=s(52143);let n=(0,a.t)(o.i6,{schema:t})},53117:(e,r,s)=>{"use strict";s.r(r),s.d(r,{accounts:()=>p,carts:()=>g,products:()=>w,sessions:()=>x,users:()=>f,verificationTokens:()=>h});var t=s(15308),a=s(59397),o=s(39411),n=s(70380),i=s(46248),d=s(67691),c=s(21305),l=s(10950),u=s(22344),m=s(14244);let f=(0,t.af)("user",{id:(0,a.Vj)("id").defaultRandom().primaryKey().notNull(),name:(0,o.fL)("name").default("NO_NAME").notNull(),role:(0,o.fL)("role").notNull().default("user"),password:(0,o.fL)("password"),email:(0,o.fL)("email").notNull(),emailVerified:(0,n.AB)("emailVerified",{mode:"date"}),image:(0,o.fL)("image")}),p=(0,t.af)("account",{userId:(0,a.Vj)("userId").notNull().references(()=>f.id,{onDelete:"cascade"}),type:(0,o.fL)("type").$type().notNull(),provider:(0,o.fL)("provider").notNull(),providerAccountId:(0,o.fL)("providerAccountId").notNull(),refresh_token:(0,o.fL)("refresh_token"),access_token:(0,o.fL)("access_token"),expires_at:(0,i._L)("expires_at"),token_type:(0,o.fL)("token_type"),scope:(0,o.fL)("scope"),id_token:(0,o.fL)("id_token"),session_state:(0,o.fL)("session_state")},e=>({compoundKey:(0,m.CK)({columns:[e.provider,e.providerAccountId]})})),x=(0,t.af)("session",{sessionToken:(0,o.fL)("sessionToken").primaryKey(),userId:(0,a.Vj)("userId").notNull().references(()=>f.id,{onDelete:"cascade"}),expires:(0,n.AB)("expires",{mode:"date"}).notNull()}),h=(0,t.af)("verificationToken",{identifier:(0,o.fL)("identifier").notNull(),token:(0,o.fL)("token").notNull(),expires:(0,n.AB)("expires",{mode:"date"}).notNull()},e=>({compoundKey:(0,m.CK)({columns:[e.identifier,e.token]})})),w=(0,t.af)("product",{id:(0,a.Vj)("id").defaultRandom().primaryKey().notNull(),name:(0,o.fL)("name").notNull(),slug:(0,o.fL)("slug").notNull(),category:(0,o.fL)("category").notNull(),images:(0,o.fL)("images").array().notNull(),brand:(0,o.fL)("brand").notNull(),description:(0,o.fL)("description").notNull(),stock:(0,i._L)("stock").notNull(),price:(0,d.uR)("price",{precision:12,scale:2}).notNull().default("0"),rating:(0,d.uR)("rating",{precision:3,scale:2}).notNull().default("0"),numReviews:(0,i._L)("numReviews").notNull().default(0),isFeatured:(0,c.O7)("isFeatured").default(!1).notNull(),banner:(0,o.fL)("banner"),createdAt:(0,n.AB)("createdAt").defaultNow().notNull()},e=>({productSlugIdx:(0,l.o9)("product_slug_idx").on(e.slug)})),g=(0,t.af)("cart",{id:(0,a.Vj)("id").notNull().defaultRandom().primaryKey(),userId:(0,a.Vj)("userId").references(()=>f.id,{onDelete:"cascade"}),sessionCartId:(0,o.fL)("sessionCartId").notNull(),items:(0,u.AV)("items").$type().notNull().default([]),itemsPrice:(0,d.uR)("itemsPrice",{precision:12,scale:2}).notNull(),shippingPrice:(0,d.uR)("shippingPrice",{precision:12,scale:2}).notNull(),taxPrice:(0,d.uR)("taxPrice",{precision:12,scale:2}).notNull(),totalPrice:(0,d.uR)("totalPrice",{precision:12,scale:2}).notNull(),createdAt:(0,n.AB)("createdAt").notNull().defaultNow()})},6001:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$ACTION_0:()=>h,$$ACTION_1:()=>g,addItemToCart:()=>x,getMyCart:()=>f,removeItemFromCart:()=>w});var t=s(94214);s(84674);var a=s(1779),o=s(9396),n=s(53117),i=s(29785),d=s(52845),c=s(45315),l=s(37170),u=s(6778),m=s(54772);async function f(){let e=d.cookies().get("sessionCartId")?.value;if(!e)return;let r=await (0,a.I8)(),s=r?.user.id;return await o.Z.query.carts.findFirst({where:s?(0,i.eq)(n.carts.userId,s):(0,i.eq)(n.carts.sessionCartId,e)})}let p=e=>{let r=(0,l.Xp)(e.reduce((e,r)=>e+r.price*r.qty,0)),s=(0,l.Xp)(r>100?0:10),t=(0,l.Xp)(.15*r),a=(0,l.Xp)(r+s+t);return{itemsPrice:r.toFixed(2),shippingPrice:s.toFixed(2),taxPrice:t.toFixed(2),totalPrice:a.toFixed(2)}},x=(0,t.j)("d2d3db1dd1f5ae5ad5053f8ad3bc0f2da4d94473",h);async function h(e){try{let r=d.cookies().get("sessionCartId")?.value;if(!r)throw Error("Cart Session not found");let s=await (0,a.I8)(),t=s?.user.id,l=await f(),m=c.oU.parse(e),x=await o.Z.query.products.findFirst({where:(0,i.eq)(n.products.id,m.productId)});if(!x)throw Error("Product not found");if(l){let e=l.items.find(e=>e.productId===m.productId);if(e){if(x.stock<e.qty+1)throw Error("Not enough stock");l.items.find(e=>e.productId===m.productId).qty=e.qty+1}else{if(x.stock<1)throw Error("Not enough stock");l.items.push(m)}return await o.Z.update(n.carts).set({items:l.items,...p(l.items)}).where((0,i.xD)((0,i.eq)(n.carts.id,l.id))),(0,u.revalidatePath)(`/product/${x.slug}`),{success:!0,message:`${x.name} ${e?"updated in":"added to"} cart successfully`}}if(x.stock<1)throw Error("Not enough stock");return await o.Z.insert(n.carts).values({userId:t,items:[m],sessionCartId:r,...p([m])}),(0,u.revalidatePath)(`/product/${x.slug}`),{success:!0,message:"Item added to cart successfully"}}catch(e){return{success:!1,message:(0,l.Z)(e)}}}let w=(0,t.j)("9ca5872de79006ed19093a5fb9a9561bb840e13b",g);async function g(e){try{if(!d.cookies().get("sessionCartId")?.value)throw Error("Cart Session not found");let r=await o.Z.query.products.findFirst({where:(0,i.eq)(n.products.id,e)});if(!r)throw Error("Product not found");let s=await f();if(!s)throw Error("Cart not found");let t=s.items.find(r=>r.productId===e);if(!t)throw Error("Item not found");return 1===t.qty?s.items=s.items.filter(e=>e.productId!==t.productId):s.items.find(r=>r.productId===e).qty=t.qty-1,await o.Z.update(n.carts).set({items:s.items,...p(s.items)}).where((0,i.eq)(n.carts.id,s.id)),(0,u.revalidatePath)(`/product/${r.slug}`),{success:!0,message:`${r.name}  ${s.items.find(r=>r.productId===e)?"updated in":"removed from"} cart successfully`}}catch(e){return{success:!1,message:(0,l.Z)(e)}}}(0,m.h)([f,x,w]),(0,t.j)("fe554d431ad4dbdcf2b2dc0e821c8d0adcf5a00c",f),(0,t.j)("41fc677b184effcb0016e001cd930a9fb30ddb0a",x),(0,t.j)("d33ae3afc17ff86a896b65bbc01c77b3fd04f032",w)},90284:(e,r,s)=>{"use strict";s.r(r),s.d(r,{getLatestProducts:()=>d,getProductBySlug:()=>c});var t=s(94214);s(84674);var a=s(95013),o=s(9396),n=s(53117),i=s(29785);async function d(){return await o.Z.query.products.findMany({orderBy:[(0,a.C)(n.products.createdAt)],limit:4})}async function c(e){return await o.Z.query.products.findFirst({where:(0,i.eq)(n.products.slug,e)})}(0,s(54772).h)([d,c]),(0,t.j)("c3eb83f4f2c3c6520335c2901923f6bd3b894bf7",d),(0,t.j)("0f6aa5e6d202769cd8578b8ac2d146834f2f4bb9",c)},23829:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$ACTION_0:()=>x,SignOut:()=>p,signInWithCredentials:()=>f,signUp:()=>m});var t=s(94214);s(84674);var a=s(1192),o=s(1779),n=s(45315),i=s(17198),d=s(9396),c=s(53117),l=s(37170),u=s(54772);async function m(e,r){try{let e=n.hV.parse({name:r.get("name"),email:r.get("email"),confirmPassword:r.get("confirmPassword"),password:r.get("password")}),s={id:crypto.randomUUID(),...e,password:(0,i.St)(e.password,10)};return await d.Z.insert(c.users).values(s),await (0,o.zB)("credentials",{email:e.email,password:e.password}),{success:!0,message:"User created successfully"}}catch(e){if((0,a.isRedirectError)(e))throw e;return{success:!1,message:(0,l.Z)(e).includes('duplicate key value violates unique constraint "user_email_idx"')?"Email is already exist":(0,l.Z)(e)}}}async function f(e,r){try{let e=n.aW.parse({email:r.get("email"),password:r.get("password")});return await (0,o.zB)("credentials",e),{success:!0,message:"Sig in successfully"}}catch(e){if((0,a.isRedirectError)(e))throw e;return{success:!1,message:"Invalid email or password"}}}let p=(0,t.j)("9894e6c57f99a2f4eccac4a43c9c453c2e8680a4",x);async function x(){await (0,o.w7)()}(0,u.h)([m,f,p]),(0,t.j)("be840f0dc3afac8b8d0c6b02dc3328bacb294db1",m),(0,t.j)("c90075d8792b89f7584984a67b421aab69e556af",f),(0,t.j)("6f62a9caef1528e29ef4461e98a41e80f8b1eae5",p)},89112:(e,r,s)=>{"use strict";s.d(r,{iC:()=>t});let t="Choose Life and Peace"},37170:(e,r,s)=>{"use strict";s.d(r,{Aj:()=>i,Xp:()=>d,Z:()=>n,cn:()=>o});var t=s(36272),a=s(51472);function o(...e){return(0,a.m6)((0,t.W)(e))}let n=e=>"ZodError"===e.name?Object.keys(e.errors).map(r=>{let s=e.errors[r].message;return`${e.errors[r].path}: ${s}`}).join(". "):"ValidationError"===e.name?Object.keys(e.errors).map(r=>e.errors[r].message).join(". "):"string"==typeof e.message?e.message:JSON.stringify(e.message),i=e=>{let[r,s]=e.toString().split(".");return s?`${r}.${s.padEnd(2,"0")}`:r},d=e=>{if("number"==typeof e)return Math.round((e+Number.EPSILON)*100)/100;if("string"==typeof e)return Math.round((Number(e)+Number.EPSILON)*100)/100;throw Error("value is not a number nor a string")}},45315:(e,r,s)=>{"use strict";s.d(r,{aW:()=>o,hV:()=>n,oU:()=>i});var t=s(11045),a=s(37170);let o=t.Ry({email:t.Z_().email().min(3,"Email must be at least 3 characters"),password:t.Z_().min(3,"Password must be at least 3 characters")}),n=t.Ry({name:t.Z_().min(3,"Name must be at least 3 characters"),email:t.Z_().email().min(3,"Email must be at least 3 characters"),password:t.Z_().min(3,"Password must be at least 3 characters"),confirmPassword:t.Z_().min(3,"Confirm password must be at least 3 characters")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),i=t.Ry({productId:t.Z_().min(1,"Product is required"),name:t.Z_().min(1,"Name is required"),slug:t.Z_().min(1,"Slug is required"),qty:t.Rx().int().nonnegative("Quantity must be a non-negative number"),image:t.Z_().min(1,"Image is required"),price:t.Rx().refine(e=>/^\d+(\.\d{2})?$/.test((0,a.Aj)(e)),"Price must have exactly two decimal places (e.g., 49.99)")})},67272:()=>{}};