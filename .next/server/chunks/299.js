exports.id=299,exports.ids=[299],exports.modules={28194:(e,a,s)=>{let r={"4896ea1b4f1dace1ade49eb3651161dc0c4f102a":()=>Promise.resolve().then(s.bind(s,504)).then(e=>e.getUserById),"6f62a9caef1528e29ef4461e98a41e80f8b1eae5":()=>Promise.resolve().then(s.bind(s,504)).then(e=>e.SignOut),"7ef6945e100c99ebbac8da6a81410b4410597f01":()=>Promise.resolve().then(s.bind(s,504)).then(e=>e.updateUserAddress),"9894e6c57f99a2f4eccac4a43c9c453c2e8680a4":()=>Promise.resolve().then(s.bind(s,504)).then(e=>e.$$ACTION_0),abc73778e07b95e9d8f15868fea7f03dbbca9e71:()=>Promise.resolve().then(s.bind(s,504)).then(e=>e.updateUserPaymentMethod),be840f0dc3afac8b8d0c6b02dc3328bacb294db1:()=>Promise.resolve().then(s.bind(s,504)).then(e=>e.signUp),c90075d8792b89f7584984a67b421aab69e556af:()=>Promise.resolve().then(s.bind(s,504)).then(e=>e.signInWithCredentials)};async function t(e,...a){return(await r[e]()).apply(null,a)}e.exports={"4896ea1b4f1dace1ade49eb3651161dc0c4f102a":t.bind(null,"4896ea1b4f1dace1ade49eb3651161dc0c4f102a"),"6f62a9caef1528e29ef4461e98a41e80f8b1eae5":t.bind(null,"6f62a9caef1528e29ef4461e98a41e80f8b1eae5"),"7ef6945e100c99ebbac8da6a81410b4410597f01":t.bind(null,"7ef6945e100c99ebbac8da6a81410b4410597f01"),"9894e6c57f99a2f4eccac4a43c9c453c2e8680a4":t.bind(null,"9894e6c57f99a2f4eccac4a43c9c453c2e8680a4"),abc73778e07b95e9d8f15868fea7f03dbbca9e71:t.bind(null,"abc73778e07b95e9d8f15868fea7f03dbbca9e71"),be840f0dc3afac8b8d0c6b02dc3328bacb294db1:t.bind(null,"be840f0dc3afac8b8d0c6b02dc3328bacb294db1"),c90075d8792b89f7584984a67b421aab69e556af:t.bind(null,"c90075d8792b89f7584984a67b421aab69e556af")}},35303:()=>{},58053:(e,a,s)=>{"use strict";s.d(a,{z:()=>c});var r=s(97247),t=s(28964),i=s(69008),n=s(77247),d=s(25008);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=t.forwardRef(({className:e,variant:a,size:s,asChild:t=!1,...n},c)=>{let l=t?i.g7:"button";return r.jsx(l,{className:(0,d.cn)(o({variant:a,size:s,className:e})),ref:c,...n})});c.displayName="Button"},70170:(e,a,s)=>{"use strict";s.d(a,{I:()=>n});var r=s(97247),t=s(28964),i=s(25008);let n=t.forwardRef(({className:e,type:a,...s},t)=>r.jsx("input",{type:a,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));n.displayName="Input"},22394:(e,a,s)=>{"use strict";s.d(a,{_:()=>c});var r=s(97247),t=s(28964),i=s(40768),n=s(77247),d=s(25008);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=t.forwardRef(({className:e,...a},s)=>r.jsx(i.f,{ref:s,className:(0,d.cn)(o(),e),...a}));c.displayName=i.f.displayName},75987:(e,a,s)=>{"use strict";s.d(a,{$X:()=>d,Fy:()=>t,c4:()=>n,y1:()=>i}),s(70689);var r=s(11294),t=(0,r.$)("abc73778e07b95e9d8f15868fea7f03dbbca9e71"),i=(0,r.$)("be840f0dc3afac8b8d0c6b02dc3328bacb294db1"),n=(0,r.$)("c90075d8792b89f7584984a67b421aab69e556af");(0,r.$)("6f62a9caef1528e29ef4461e98a41e80f8b1eae5"),(0,r.$)("4896ea1b4f1dace1ade49eb3651161dc0c4f102a");var d=(0,r.$)("7ef6945e100c99ebbac8da6a81410b4410597f01")},17916:(e,a,s)=>{"use strict";s.d(a,{LM:()=>r,dF:()=>d,p7:()=>t,y5:()=>i,yW:()=>n});let r=process.env.PAYMENT_METHODS?process.env.PAYMENT_METHODS.split(", "):["PayPal","Stripe"],t=process.env.DEFAULT_PAYMENT_METHOD||"PayPal",i={email:"",password:""},n={name:"",email:"",password:"",confirmPassword:""},d={fullName:"",streetAddress:"",city:"",postalCode:"",country:""}},46710:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});var r=s(72051);s(26269);let t=({children:e})=>r.jsx("div",{className:"flex-center min-n-screen w-full",children:e})},6669:(e,a,s)=>{"use strict";s.d(a,{Ol:()=>d,SZ:()=>c,Zb:()=>n,aY:()=>l,ll:()=>o});var r=s(72051),t=s(26269),i=s(37170);let n=t.forwardRef(({className:e,...a},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...a}));n.displayName="Card";let d=t.forwardRef(({className:e,...a},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a}));d.displayName="CardHeader";let o=t.forwardRef(({className:e,...a},s)=>r.jsx("h3",{ref:s,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...a}));o.displayName="CardTitle";let c=t.forwardRef(({className:e,...a},s)=>r.jsx("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...a}));c.displayName="CardDescription";let l=t.forwardRef(({className:e,...a},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...a}));l.displayName="CardContent",t.forwardRef(({className:e,...a},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},504:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$ACTION_0:()=>J,SignOut:()=>W,getUserById:()=>Q,signInWithCredentials:()=>z,signUp:()=>Y,updateUserAddress:()=>X,updateUserPaymentMethod:()=>G});var r={};s.r(r),s.d(r,{accounts:()=>x,carts:()=>j,products:()=>I,sessions:()=>_,users:()=>N,verificationTokens:()=>P});var t=s(28713);s(9640);var i=s(22614),n=s(35141),d=s(40461),o=s(54068),c=s(19498),l=s(35472),u=s(74342),f=s(62428),m=s(19169),p=s(79492),b=s(40915),y=s(74722),g=s(23662),h=s(89221),w=s(5614),v=s(55519);let N=(0,u.af)("user",{id:(0,f.Vj)("id").defaultRandom().primaryKey().notNull(),name:(0,m.fL)("name").default("NO_NAME").notNull(),role:(0,m.fL)("role").notNull().default("user"),password:(0,m.fL)("password"),email:(0,m.fL)("email").notNull(),emailVerified:(0,p.AB)("emailVerified",{mode:"date"}),image:(0,m.fL)("image"),address:(0,b.AV)("address").$type(),paymentMethod:(0,m.fL)("paymentMethod")}),x=(0,u.af)("account",{userId:(0,f.Vj)("userId").notNull().references(()=>N.id,{onDelete:"cascade"}),type:(0,m.fL)("type").$type().notNull(),provider:(0,m.fL)("provider").notNull(),providerAccountId:(0,m.fL)("providerAccountId").notNull(),refresh_token:(0,m.fL)("refresh_token"),access_token:(0,m.fL)("access_token"),expires_at:(0,y._L)("expires_at"),token_type:(0,m.fL)("token_type"),scope:(0,m.fL)("scope"),id_token:(0,m.fL)("id_token"),session_state:(0,m.fL)("session_state")},e=>({compoundKey:(0,v.CK)({columns:[e.provider,e.providerAccountId]})})),_=(0,u.af)("session",{sessionToken:(0,m.fL)("sessionToken").primaryKey(),userId:(0,f.Vj)("userId").notNull().references(()=>N.id,{onDelete:"cascade"}),expires:(0,p.AB)("expires",{mode:"date"}).notNull()}),P=(0,u.af)("verificationToken",{identifier:(0,m.fL)("identifier").notNull(),token:(0,m.fL)("token").notNull(),expires:(0,p.AB)("expires",{mode:"date"}).notNull()},e=>({compoundKey:(0,v.CK)({columns:[e.identifier,e.token]})})),I=(0,u.af)("product",{id:(0,f.Vj)("id").defaultRandom().primaryKey().notNull(),name:(0,m.fL)("name").notNull(),slug:(0,m.fL)("slug").notNull(),category:(0,m.fL)("category").notNull(),images:(0,m.fL)("images").array().notNull(),brand:(0,m.fL)("brand").notNull(),description:(0,m.fL)("description").notNull(),stock:(0,y._L)("stock").notNull(),price:(0,g.uR)("price",{precision:12,scale:2}).notNull().default("0"),rating:(0,g.uR)("rating",{precision:3,scale:2}).notNull().default("0"),numReviews:(0,y._L)("numReviews").notNull().default(0),isFeatured:(0,h.O7)("isFeatured").default(!1).notNull(),banner:(0,m.fL)("banner"),createdAt:(0,p.AB)("createdAt").defaultNow().notNull()},e=>({productSlugIdx:(0,w.o9)("product_slug_idx").on(e.slug)})),j=(0,u.af)("cart",{id:(0,f.Vj)("id").notNull().defaultRandom().primaryKey(),userId:(0,f.Vj)("userId").references(()=>N.id,{onDelete:"cascade"}),sessionCartId:(0,m.fL)("sessionCartId").notNull(),items:(0,b.AV)("items").$type().notNull().default([]),itemsPrice:(0,g.uR)("itemsPrice",{precision:12,scale:2}).notNull(),shippingPrice:(0,g.uR)("shippingPrice",{precision:12,scale:2}).notNull(),taxPrice:(0,g.uR)("taxPrice",{precision:12,scale:2}).notNull(),totalPrice:(0,g.uR)("totalPrice",{precision:12,scale:2}).notNull(),createdAt:(0,p.AB)("createdAt").notNull().defaultNow()});var L=s(6355),R=s(49834);let A=(0,L.t)(R.i6,{schema:r});var k=s(53020),C=s(58995);let E={pages:{signIn:"/sign-in",error:"/sign-in"},session:{strategy:"jwt",maxAge:2592e3},adapter:(0,n.J)(A),providers:[(0,l.Z)({credentials:{email:{type:"email"},password:{type:"password"}},async authorize(e){if(null==e)return null;let a=await A.query.users.findFirst({where:(0,o.eq)(N.email,e.email)});return a&&a.password&&(0,d.oH)(e.password,a.password)?{id:a.id,name:a.name,email:a.email,role:a.role}:null}})],callbacks:{jwt:async({token:e,user:a,trigger:s,session:r})=>{if(a&&("signIn"===s||"signUp"===s)){let e=k.cookies().get("sessionCartId")?.value;if(!e)throw Error("Session Cart Not Found");let s=await A.query.carts.findFirst({where:(0,o.eq)(j.sessionCartId,e)});if(s&&!s.userId){let r=await A.query.carts.findFirst({where:(0,o.eq)(j.userId,a.id)});r?((0,k.cookies)().set("beforeSigninSessionCartId",e),(0,k.cookies)().set("sessionCartId",r.sessionCartId)):A.update(j).set({userId:a.id}).where((0,o.eq)(j.id,s.id))}}return r?.user.name&&"update"===s&&(e.name=r.user.name),e},session:async({session:e,user:a,trigger:s,token:r})=>(e.user.id=r.sub,e.user.role=r.role,e.user.name=r.name,"update"===s&&(e.user.name=a.name),e),authorized({request:e,auth:a}){let{pathname:s}=e.nextUrl;if(!a&&[/\/shipping-address/,/\/payment-method/,/\/place-order/,/\/profile/,/\/user\/(.*)/,/\/order\/(.*)/,/\/admin/].some(e=>e.test(s)))return!1;if(e.cookies.get("sessionCartId"))return!0;{let a=crypto.randomUUID(),s=new Headers(e.headers),r=C.NextResponse.next({request:{headers:s}});return r.cookies.set("sessionCartId",a),r}}}},{handlers:U,auth:T,signIn:Z,signOut:q}=(0,c.ZP)(E);var S=s(79176);Intl.NumberFormat("en-US",{currency:"USD",style:"currency",minimumFractionDigits:2});let M=e=>"ZodError"===e.name?Object.keys(e.errors).map(a=>{let s=e.errors[a].message;return`${e.errors[a].path}: ${s}`}).join(". "):"ValidationError"===e.name?Object.keys(e.errors).map(a=>e.errors[a].message).join(". "):"string"==typeof e.message?e.message:JSON.stringify(e.message),$=e=>{let[a,s]=e.toString().split(".");return s?`${a}.${s.padEnd(2,"0")}`:a},D=process.env.PAYMENT_METHODS?process.env.PAYMENT_METHODS.split(", "):["PayPal","Stripe"];process.env.DEFAULT_PAYMENT_METHOD;let F=S.Ry({email:S.Z_().email().min(3,"Email must be at least 3 characters"),password:S.Z_().min(3,"Password must be at least 3 characters")}),O=S.Ry({name:S.Z_().min(3,"Name must be at least 3 characters"),email:S.Z_().email().min(3,"Email must be at least 3 characters"),password:S.Z_().min(3,"Password must be at least 3 characters"),confirmPassword:S.Z_().min(3,"Confirm password must be at least 3 characters")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});S.Ry({productId:S.Z_().min(1,"Product is required"),name:S.Z_().min(1,"Name is required"),slug:S.Z_().min(1,"Slug is required"),qty:S.Rx().int().nonnegative("Quantity must be a non-negative number"),image:S.Z_().min(1,"Image is required"),price:S.Rx().refine(e=>/^\d+(\.\d{2})?$/.test($(e)),"Price must have exactly two decimal places (e.g., 49.99)")});let V=S.Ry({fullName:S.Z_().min(3,"Name must be at least 3 characters"),streetAddress:S.Z_().min(3,"Address must be at least 3 characters"),city:S.Z_().min(3,"city must be at least 3 characters"),postalCode:S.Z_().min(3,"Postal code must be at least 3 characters"),country:S.Z_().min(3,"Country must be at least 3 characters"),lat:S.Rx().optional(),lng:S.Rx().optional()}),H=S.Ry({type:S.Z_().min(1,"Payment method is required")}).refine(e=>D.includes(e.type),{path:["type"],message:"Invalid payment method"});var B=s(80166),K=s(83557);async function Y(e,a){try{let e=O.parse({name:a.get("name"),email:a.get("email"),confirmPassword:a.get("confirmPassword"),password:a.get("password")}),s={id:crypto.randomUUID(),...e,password:(0,d.St)(e.password,10)};return await A.insert(N).values(s),await Z("credentials",{email:e.email,password:e.password}),{success:!0,message:"User created successfully"}}catch(e){if((0,i.isRedirectError)(e))throw e;return{success:!1,message:M(e).includes('duplicate key value violates unique constraint "user_email_idx"')?"Email is already exist":M(e)}}}async function z(e,a){try{let e=F.parse({email:a.get("email"),password:a.get("password")});return await Z("credentials",e),{success:!0,message:"Sig in successfully"}}catch(e){if((0,i.isRedirectError)(e))throw e;return{success:!1,message:"Invalid email or password"}}}let W=(0,t.j)("9894e6c57f99a2f4eccac4a43c9c453c2e8680a4",J);async function J(){await q()}async function Q(e){let a=await A.query.users.findFirst({where:(a,{eq:s})=>s(a.id,e)});if(!a)throw Error("User not found");return a}async function X(e){try{let a=await T(),s=await A.query.users.findFirst({where:(e,{eq:s})=>s(e.id,a?.user.id)});if(!s)throw Error("User not found");let r=V.parse(e);return await A.update(N).set({address:r}).where((0,o.eq)(N.id,s.id)),(0,B.revalidatePath)("/place-order"),{success:!0,message:"User updated successfully"}}catch(e){return{success:!1,message:M(e)}}}async function G(e){try{let a=await T(),s=await A.query.users.findFirst({where:(e,{eq:s})=>s(e.id,a?.user.id)});if(!s)throw Error("User not found");let r=H.parse(e);return await A.update(N).set({paymentMethod:r.type}).where((0,o.eq)(N.id,s.id)),{success:!0,message:"User updated successfully"}}catch(e){return{success:!1,message:M(e)}}}(0,K.h)([Y,z,W,Q,X,G]),(0,t.j)("be840f0dc3afac8b8d0c6b02dc3328bacb294db1",Y),(0,t.j)("c90075d8792b89f7584984a67b421aab69e556af",z),(0,t.j)("6f62a9caef1528e29ef4461e98a41e80f8b1eae5",W),(0,t.j)("4896ea1b4f1dace1ade49eb3651161dc0c4f102a",Q),(0,t.j)("7ef6945e100c99ebbac8da6a81410b4410597f01",X),(0,t.j)("abc73778e07b95e9d8f15868fea7f03dbbca9e71",G)}};