exports.id=599,exports.ids=[599],exports.modules={35367:(e,s,t)=>{Promise.resolve().then(t.bind(t,6047)),Promise.resolve().then(t.t.bind(t,15889,23)),Promise.resolve().then(t.t.bind(t,34080,23))},6047:(e,s,t)=>{"use strict";t.d(s,{DropdownMenu:()=>i,DropdownMenuContent:()=>u,DropdownMenuItem:()=>l,DropdownMenuLabel:()=>m,DropdownMenuTrigger:()=>c});var r=t(97247),a=t(28964),o=t(46070),n=t(2095),d=t(25008);let i=o.fC,c=o.xz;o.ZA,o.Uv,o.Tr,o.Ee,a.forwardRef(({className:e,inset:s,children:t,...a},i)=>(0,r.jsxs)(o.fF,{ref:i,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",e),...a,children:[t,r.jsx(n.XCv,{className:"ml-auto h-4 w-4"})]})).displayName=o.fF.displayName,a.forwardRef(({className:e,...s},t)=>r.jsx(o.tu,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})).displayName=o.tu.displayName;let u=a.forwardRef(({className:e,sideOffset:s=4,...t},a)=>r.jsx(o.Uv,{children:r.jsx(o.VY,{ref:a,sideOffset:s,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));u.displayName=o.VY.displayName;let l=a.forwardRef(({className:e,inset:s,...t},a)=>r.jsx(o.ck,{ref:a,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",e),...t}));l.displayName=o.ck.displayName,a.forwardRef(({className:e,children:s,checked:t,...a},i)=>(0,r.jsxs)(o.oC,{ref:i,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(o.wU,{children:r.jsx(n.nQG,{className:"h-4 w-4"})})}),s]})).displayName=o.oC.displayName,a.forwardRef(({className:e,children:s,...t},a)=>(0,r.jsxs)(o.Rk,{ref:a,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(o.wU,{children:r.jsx(n.jXb,{className:"h-4 w-4 fill-current"})})}),s]})).displayName=o.Rk.displayName;let m=a.forwardRef(({className:e,inset:s,...t},a)=>r.jsx(o.__,{ref:a,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...t}));m.displayName=o.__.displayName,a.forwardRef(({className:e,...s},t)=>r.jsx(o.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=o.Z0.displayName},56712:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>U});var r=t(72051),a=t(89112);let o=()=>r.jsx("footer",{className:"border-t",children:(0,r.jsxs)("div",{className:"p-5 flex-center",children:["2024 ",a.iC,". All Rights reserved."]})});var n=t(59624),d=t(92349),i=t(1779),c=t(26269),u=t(96734),l=t(45994),m=t(37170);let f=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),p=c.forwardRef(({className:e,variant:s,size:t,asChild:a=!1,...o},n)=>{let d=a?u.g7:"button";return r.jsx(d,{className:(0,m.cn)(f({variant:s,size:t,className:e})),ref:n,...o})});p.displayName="Button";var h=t(45347);let w=(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenu`),x=(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuTrigger`),g=(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuContent`),y=(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuItem`);(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuCheckboxItem`),(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuRadioItem`);let b=(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuLabel`);(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuSeparator`),(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuShortcut`),(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuGroup`),(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuPortal`),(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuSub`),(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuSubContent`),(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuSubTrigger`),(0,h.createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/components/ui/dropdown-menu.tsx#DropdownMenuRadioGroup`);var v=t(23829);async function j(){let e=await (0,i.I8)();return e?r.jsx("div",{className:"flex gap-2 items-center",children:(0,r.jsxs)(w,{children:[r.jsx(x,{asChild:!0,children:r.jsx("div",{className:"flex items-center",children:r.jsx(p,{variant:"ghost",className:"relative w-8 h-8 rounded-full ml-2",children:e.user.name})})}),(0,r.jsxs)(g,{className:"w-56",align:"end",forceMount:!0,children:[r.jsx(b,{className:"font-normal",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-1",children:[r.jsx("p",{className:"text-sm font-medium leading-none",children:e.user.name}),r.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.user.email})]})}),r.jsx(y,{className:"p-0 mb-1",children:r.jsx("form",{action:v.SignOut,className:"w-full",children:r.jsx(p,{className:"w-full py-4 px-2 h-4 justify-start",variant:"ghost",children:"Sign Out"})})})]})]})}):r.jsx(d.default,{href:"/api/auth/signin",children:r.jsx(p,{children:"Sign In"})})}var N=t(30811),P=t(20353),I=t(6001);async function D(){let e=await (0,I.getMyCart)();return r.jsx(p,{asChild:!0,variant:"ghost",children:(0,r.jsxs)(d.default,{href:"/cart",children:[r.jsx(N.Z,{className:"mr-1"}),"Cart",e&&e.items.length>0&&r.jsx(P.C,{className:"ml-1",children:e.items.reduce((e,s)=>e+s.qty,0)})]})})}let Z=()=>r.jsx(r.Fragment,{children:r.jsx("div",{className:"flex justify-end gap-3",children:(0,r.jsxs)("nav",{className:"md:flex hidden w-full max-w-xs gap-1",children:[r.jsx(D,{}),r.jsx(j,{})]})})}),C=async()=>r.jsx("header",{className:"w-full border-b",children:(0,r.jsxs)("div",{className:"wrapper flex-between",children:[r.jsx("div",{className:"flex-start",children:(0,r.jsxs)(d.default,{href:"/",className:"flex-start",children:[r.jsx(n.default,{src:"/assets/icons/logo.svg",width:48,height:48,alt:`${a.iC} logo`}),a.iC]})}),r.jsx(Z,{})]})});function U({children:e}){return(0,r.jsxs)("div",{className:"flex h-screen flex-col",children:[r.jsx(C,{}),r.jsx("main",{className:"flex-1 wrapper",children:e}),r.jsx(o,{})]})}},20353:(e,s,t)=>{"use strict";t.d(s,{C:()=>d});var r=t(72051);t(26269);var a=t(45994),o=t(37170);let n=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:s,...t}){return r.jsx("div",{className:(0,o.cn)(n({variant:s}),e),...t})}},6001:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$ACTION_0:()=>w,$$ACTION_1:()=>g,addItemToCart:()=>h,getMyCart:()=>f,removeItemFromCart:()=>x});var r=t(94214);t(84674);var a=t(1779),o=t(9396),n=t(53117),d=t(29785),i=t(52845),c=t(45315),u=t(37170),l=t(6778),m=t(54772);async function f(){let e=i.cookies().get("sessionCartId")?.value;if(!e)return;let s=await (0,a.I8)(),t=s?.user.id;return await o.Z.query.carts.findFirst({where:t?(0,d.eq)(n.carts.userId,t):(0,d.eq)(n.carts.sessionCartId,e)})}let p=e=>{let s=(0,u.Xp)(e.reduce((e,s)=>e+s.price*s.qty,0)),t=(0,u.Xp)(s>100?0:10),r=(0,u.Xp)(.15*s),a=(0,u.Xp)(s+t+r);return{itemsPrice:s.toFixed(2),shippingPrice:t.toFixed(2),taxPrice:r.toFixed(2),totalPrice:a.toFixed(2)}},h=(0,r.j)("d2d3db1dd1f5ae5ad5053f8ad3bc0f2da4d94473",w);async function w(e){try{let s=i.cookies().get("sessionCartId")?.value;if(!s)throw Error("Cart Session not found");let t=await (0,a.I8)(),r=t?.user.id,u=await f(),m=c.oU.parse(e),h=await o.Z.query.products.findFirst({where:(0,d.eq)(n.products.id,m.productId)});if(!h)throw Error("Product not found");if(u){let e=u.items.find(e=>e.productId===m.productId);if(e){if(h.stock<e.qty+1)throw Error("Not enough stock");u.items.find(e=>e.productId===m.productId).qty=e.qty+1}else{if(h.stock<1)throw Error("Not enough stock");u.items.push(m)}return await o.Z.update(n.carts).set({items:u.items,...p(u.items)}).where((0,d.xD)((0,d.eq)(n.carts.id,u.id))),(0,l.revalidatePath)(`/product/${h.slug}`),{success:!0,message:`${h.name} ${e?"updated in":"added to"} cart successfully`}}if(h.stock<1)throw Error("Not enough stock");return await o.Z.insert(n.carts).values({userId:r,items:[m],sessionCartId:s,...p([m])}),(0,l.revalidatePath)(`/product/${h.slug}`),{success:!0,message:"Item added to cart successfully"}}catch(e){return{success:!1,message:(0,u.Z)(e)}}}let x=(0,r.j)("9ca5872de79006ed19093a5fb9a9561bb840e13b",g);async function g(e){try{if(!i.cookies().get("sessionCartId")?.value)throw Error("Cart Session not found");let s=await o.Z.query.products.findFirst({where:(0,d.eq)(n.products.id,e)});if(!s)throw Error("Product not found");let t=await f();if(!t)throw Error("Cart not found");let r=t.items.find(s=>s.productId===e);if(!r)throw Error("Item not found");return 1===r.qty?t.items=t.items.filter(e=>e.productId!==r.productId):t.items.find(s=>s.productId===e).qty=r.qty-1,await o.Z.update(n.carts).set({items:t.items,...p(t.items)}).where((0,d.eq)(n.carts.id,t.id)),(0,l.revalidatePath)(`/product/${s.slug}`),{success:!0,message:`${s.name}  ${t.items.find(s=>s.productId===e)?"updated in":"removed from"} cart successfully`}}catch(e){return{success:!1,message:(0,u.Z)(e)}}}(0,m.h)([f,h,x]),(0,r.j)("fe554d431ad4dbdcf2b2dc0e821c8d0adcf5a00c",f),(0,r.j)("41fc677b184effcb0016e001cd930a9fb30ddb0a",h),(0,r.j)("d33ae3afc17ff86a896b65bbc01c77b3fd04f032",x)},23829:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$ACTION_0:()=>x,SignOut:()=>w,getUserById:()=>g,signInWithCredentials:()=>h,signUp:()=>p,updateUserAddress:()=>y,updateUserPaymentMethod:()=>b});var r=t(94214);t(84674);var a=t(1192),o=t(1779),n=t(45315),d=t(17198),i=t(9396),c=t(53117),u=t(37170),l=t(29785),m=t(6778),f=t(54772);async function p(e,s){try{let e=n.hV.parse({name:s.get("name"),email:s.get("email"),confirmPassword:s.get("confirmPassword"),password:s.get("password")}),t={id:crypto.randomUUID(),...e,password:(0,d.St)(e.password,10)};return await i.Z.insert(c.users).values(t),await (0,o.zB)("credentials",{email:e.email,password:e.password}),{success:!0,message:"User created successfully"}}catch(e){if((0,a.isRedirectError)(e))throw e;return{success:!1,message:(0,u.Z)(e).includes('duplicate key value violates unique constraint "user_email_idx"')?"Email is already exist":(0,u.Z)(e)}}}async function h(e,s){try{let e=n.aW.parse({email:s.get("email"),password:s.get("password")});return await (0,o.zB)("credentials",e),{success:!0,message:"Sig in successfully"}}catch(e){if((0,a.isRedirectError)(e))throw e;return{success:!1,message:"Invalid email or password"}}}let w=(0,r.j)("9894e6c57f99a2f4eccac4a43c9c453c2e8680a4",x);async function x(){await (0,o.w7)()}async function g(e){let s=await i.Z.query.users.findFirst({where:(s,{eq:t})=>t(s.id,e)});if(!s)throw Error("User not found");return s}async function y(e){try{let s=await (0,o.I8)(),t=await i.Z.query.users.findFirst({where:(e,{eq:t})=>t(e.id,s?.user.id)});if(!t)throw Error("User not found");let r=n.tV.parse(e);return await i.Z.update(c.users).set({address:r}).where((0,l.eq)(c.users.id,t.id)),(0,m.revalidatePath)("/place-order"),{success:!0,message:"User updated successfully"}}catch(e){return{success:!1,message:(0,u.Z)(e)}}}async function b(e){try{let s=await (0,o.I8)(),t=await i.Z.query.users.findFirst({where:(e,{eq:t})=>t(e.id,s?.user.id)});if(!t)throw Error("User not found");let r=n.LD.parse(e);return await i.Z.update(c.users).set({paymentMethod:r.type}).where((0,l.eq)(c.users.id,t.id)),{success:!0,message:"User updated successfully"}}catch(e){return{success:!1,message:(0,u.Z)(e)}}}(0,f.h)([p,h,w,g,y,b]),(0,r.j)("be840f0dc3afac8b8d0c6b02dc3328bacb294db1",p),(0,r.j)("c90075d8792b89f7584984a67b421aab69e556af",h),(0,r.j)("6f62a9caef1528e29ef4461e98a41e80f8b1eae5",w),(0,r.j)("4896ea1b4f1dace1ade49eb3651161dc0c4f102a",g),(0,r.j)("7ef6945e100c99ebbac8da6a81410b4410597f01",y),(0,r.j)("abc73778e07b95e9d8f15868fea7f03dbbca9e71",b)},45315:(e,s,t)=>{"use strict";t.d(s,{LD:()=>u,aW:()=>n,hV:()=>d,oU:()=>i,tV:()=>c});var r=t(11045),a=t(37170),o=t(89112);let n=r.Ry({email:r.Z_().email().min(3,"Email must be at least 3 characters"),password:r.Z_().min(3,"Password must be at least 3 characters")}),d=r.Ry({name:r.Z_().min(3,"Name must be at least 3 characters"),email:r.Z_().email().min(3,"Email must be at least 3 characters"),password:r.Z_().min(3,"Password must be at least 3 characters"),confirmPassword:r.Z_().min(3,"Confirm password must be at least 3 characters")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),i=r.Ry({productId:r.Z_().min(1,"Product is required"),name:r.Z_().min(1,"Name is required"),slug:r.Z_().min(1,"Slug is required"),qty:r.Rx().int().nonnegative("Quantity must be a non-negative number"),image:r.Z_().min(1,"Image is required"),price:r.Rx().refine(e=>/^\d+(\.\d{2})?$/.test((0,a.Aj)(e)),"Price must have exactly two decimal places (e.g., 49.99)")}),c=r.Ry({fullName:r.Z_().min(3,"Name must be at least 3 characters"),streetAddress:r.Z_().min(3,"Address must be at least 3 characters"),city:r.Z_().min(3,"city must be at least 3 characters"),postalCode:r.Z_().min(3,"Postal code must be at least 3 characters"),country:r.Z_().min(3,"Country must be at least 3 characters"),lat:r.Rx().optional(),lng:r.Rx().optional()}),u=r.Ry({type:r.Z_().min(1,"Payment method is required")}).refine(e=>o.LM.includes(e.type),{path:["type"],message:"Invalid payment method"})}};