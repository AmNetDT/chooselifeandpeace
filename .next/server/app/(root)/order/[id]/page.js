(()=>{var e={};e.id=264,e.ids=[264],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},92190:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>i.a,__next_app__:()=>b,originalPathname:()=>f,pages:()=>l,routeModule:()=>u,tree:()=>o}),a(76243),a(35319),a(90996),a(13529);var t=a(30170),d=a(45002),s=a(83876),i=a.n(s),c=a(66299),n={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>c[e]);a.d(r,n);let o=["",{children:["(root)",{children:["order",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,76243)),"/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/app/(root)/order/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,35319)),"/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/app/(root)/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,90996,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,13529)),"/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,90996,23)),"next/dist/client/components/not-found-error"]}],l=["/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/app/(root)/order/[id]/page.tsx"],f="/(root)/order/[id]/page",b={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:d.x.APP_PAGE,page:"/(root)/order/[id]/page",pathname:"/order/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},30955:(e,r,a)=>{let t={"5a6d56e69c6fdbdbb96f5fcdf3cb938533d1c24c":()=>Promise.resolve().then(a.bind(a,83074)).then(e=>e.getOrderById),"62915f7c5455fffd80487d2ea4fe069934717803":()=>Promise.resolve().then(a.bind(a,83074)).then(e=>e.$$ACTION_0),ea248243752e282f1c9161e3241b42d6adba1007:()=>Promise.resolve().then(a.bind(a,83074)).then(e=>e.createOrder),"41fc677b184effcb0016e001cd930a9fb30ddb0a":()=>Promise.resolve().then(a.bind(a,6001)).then(e=>e.addItemToCart),"9ca5872de79006ed19093a5fb9a9561bb840e13b":()=>Promise.resolve().then(a.bind(a,6001)).then(e=>e.$$ACTION_1),d2d3db1dd1f5ae5ad5053f8ad3bc0f2da4d94473:()=>Promise.resolve().then(a.bind(a,6001)).then(e=>e.$$ACTION_0),d33ae3afc17ff86a896b65bbc01c77b3fd04f032:()=>Promise.resolve().then(a.bind(a,6001)).then(e=>e.removeItemFromCart),fe554d431ad4dbdcf2b2dc0e821c8d0adcf5a00c:()=>Promise.resolve().then(a.bind(a,6001)).then(e=>e.getMyCart),"4896ea1b4f1dace1ade49eb3651161dc0c4f102a":()=>Promise.resolve().then(a.bind(a,23829)).then(e=>e.getUserById),"6f62a9caef1528e29ef4461e98a41e80f8b1eae5":()=>Promise.resolve().then(a.bind(a,23829)).then(e=>e.SignOut),"7ef6945e100c99ebbac8da6a81410b4410597f01":()=>Promise.resolve().then(a.bind(a,23829)).then(e=>e.updateUserAddress),"9894e6c57f99a2f4eccac4a43c9c453c2e8680a4":()=>Promise.resolve().then(a.bind(a,23829)).then(e=>e.$$ACTION_0),abc73778e07b95e9d8f15868fea7f03dbbca9e71:()=>Promise.resolve().then(a.bind(a,23829)).then(e=>e.updateUserPaymentMethod),be840f0dc3afac8b8d0c6b02dc3328bacb294db1:()=>Promise.resolve().then(a.bind(a,23829)).then(e=>e.signUp),c90075d8792b89f7584984a67b421aab69e556af:()=>Promise.resolve().then(a.bind(a,23829)).then(e=>e.signInWithCredentials)};async function d(e,...r){return(await t[e]()).apply(null,r)}e.exports={"5a6d56e69c6fdbdbb96f5fcdf3cb938533d1c24c":d.bind(null,"5a6d56e69c6fdbdbb96f5fcdf3cb938533d1c24c"),"62915f7c5455fffd80487d2ea4fe069934717803":d.bind(null,"62915f7c5455fffd80487d2ea4fe069934717803"),ea248243752e282f1c9161e3241b42d6adba1007:d.bind(null,"ea248243752e282f1c9161e3241b42d6adba1007"),"41fc677b184effcb0016e001cd930a9fb30ddb0a":d.bind(null,"41fc677b184effcb0016e001cd930a9fb30ddb0a"),"9ca5872de79006ed19093a5fb9a9561bb840e13b":d.bind(null,"9ca5872de79006ed19093a5fb9a9561bb840e13b"),d2d3db1dd1f5ae5ad5053f8ad3bc0f2da4d94473:d.bind(null,"d2d3db1dd1f5ae5ad5053f8ad3bc0f2da4d94473"),d33ae3afc17ff86a896b65bbc01c77b3fd04f032:d.bind(null,"d33ae3afc17ff86a896b65bbc01c77b3fd04f032"),fe554d431ad4dbdcf2b2dc0e821c8d0adcf5a00c:d.bind(null,"fe554d431ad4dbdcf2b2dc0e821c8d0adcf5a00c"),"4896ea1b4f1dace1ade49eb3651161dc0c4f102a":d.bind(null,"4896ea1b4f1dace1ade49eb3651161dc0c4f102a"),"6f62a9caef1528e29ef4461e98a41e80f8b1eae5":d.bind(null,"6f62a9caef1528e29ef4461e98a41e80f8b1eae5"),"7ef6945e100c99ebbac8da6a81410b4410597f01":d.bind(null,"7ef6945e100c99ebbac8da6a81410b4410597f01"),"9894e6c57f99a2f4eccac4a43c9c453c2e8680a4":d.bind(null,"9894e6c57f99a2f4eccac4a43c9c453c2e8680a4"),abc73778e07b95e9d8f15868fea7f03dbbca9e71:d.bind(null,"abc73778e07b95e9d8f15868fea7f03dbbca9e71"),be840f0dc3afac8b8d0c6b02dc3328bacb294db1:d.bind(null,"be840f0dc3afac8b8d0c6b02dc3328bacb294db1"),c90075d8792b89f7584984a67b421aab69e556af:d.bind(null,"c90075d8792b89f7584984a67b421aab69e556af")}},27205:(e,r,a)=>{Promise.resolve().then(a.bind(a,94656))},94656:(e,r,a)=>{"use strict";a.d(r,{default:()=>b});var t=a(97247);a(28964);var d=a(77247),s=a(25008);let i=(0,d.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:r,...a}){return t.jsx("div",{className:(0,s.cn)(i({variant:r}),e),...a})}var n=a(27757),o=a(44283),l=a(44597),f=a(79906);function b({order:e}){let{shippingAddress:r,orderItems:a,itemsPrice:d,taxPrice:i,shippingPrice:b,totalPrice:u,paymentMethod:m,isPaid:p,paidAt:x,isDelivered:h,deliveredAt:j}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h1",{className:"py-4 text-2xl",children:[" Order ",(0,s.P2)(e.id)]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 md:gap-5",children:[(0,t.jsxs)("div",{className:"overflow-x-auto md:col-span-2 space-y-4",children:[t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"p-4 gap-4",children:[t.jsx("h2",{className:"text-xl pb-4",children:"Payment Method"}),t.jsx("p",{children:m}),p?(0,t.jsxs)(c,{variant:"secondary",children:["Paid at ",(0,s.o0)(x).dateTime]}):t.jsx(c,{variant:"destructive",children:"Not paid"})]})}),t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"p-4 gap-4",children:[t.jsx("h2",{className:"text-xl pb-4",children:"Shipping Address"}),t.jsx("p",{children:r.fullName}),(0,t.jsxs)("p",{children:[r.streetAddress,", ",r.city,","," ",r.postalCode,", ",r.country," "]}),h?(0,t.jsxs)(c,{variant:"secondary",children:["Delivered at ",(0,s.o0)(j).dateTime]}):t.jsx(c,{variant:"destructive",children:"Not delivered"})]})}),t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"p-4 gap-4",children:[t.jsx("h2",{className:"text-xl pb-4",children:"Order Items"}),(0,t.jsxs)(o.iA,{children:[t.jsx(o.xD,{children:(0,t.jsxs)(o.SC,{children:[t.jsx(o.ss,{children:"Item"}),t.jsx(o.ss,{children:"Quantity"}),t.jsx(o.ss,{children:"Price"})]})}),t.jsx(o.RM,{children:a.map(e=>(0,t.jsxs)(o.SC,{children:[t.jsx(o.pj,{children:(0,t.jsxs)(f.default,{href:`/product/${e.slug}`,className:"flex items-center",children:[t.jsx(l.default,{src:e.image,alt:e.name,width:50,height:50}),t.jsx("span",{className:"px-2",children:e.name})]})}),t.jsx(o.pj,{children:t.jsx("span",{className:"px-2",children:e.qty})}),(0,t.jsxs)(o.pj,{className:"text-right",children:["$",e.price]})]},e.slug))})]})]})})]}),t.jsx("div",{children:t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"p-4 space-y-4 gap-4",children:[t.jsx("h2",{className:"text-xl pb-4",children:"Order Summary"}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("div",{children:"Items"}),t.jsx("div",{children:(0,s.xG)(d)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("div",{children:"Tax"}),t.jsx("div",{children:(0,s.xG)(i)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("div",{children:"Shipping"}),t.jsx("div",{children:(0,s.xG)(b)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("div",{children:"Total"}),t.jsx("div",{children:(0,s.xG)(u)})]})]})})})]})]})}},27757:(e,r,a)=>{"use strict";a.d(r,{Zb:()=>i,aY:()=>c});var t=a(97247),d=a(28964),s=a(25008);let i=d.forwardRef(({className:e,...r},a)=>t.jsx("div",{ref:a,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));i.displayName="Card",d.forwardRef(({className:e,...r},a)=>t.jsx("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...r})).displayName="CardHeader",d.forwardRef(({className:e,...r},a)=>t.jsx("h3",{ref:a,className:(0,s.cn)("font-semibold leading-none tracking-tight",e),...r})).displayName="CardTitle",d.forwardRef(({className:e,...r},a)=>t.jsx("p",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",e),...r})).displayName="CardDescription";let c=d.forwardRef(({className:e,...r},a)=>t.jsx("div",{ref:a,className:(0,s.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent",d.forwardRef(({className:e,...r},a)=>t.jsx("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},44283:(e,r,a)=>{"use strict";a.d(r,{RM:()=>n,SC:()=>o,iA:()=>i,pj:()=>f,ss:()=>l,xD:()=>c});var t=a(97247),d=a(28964),s=a(25008);let i=d.forwardRef(({className:e,...r},a)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:a,className:(0,s.cn)("w-full caption-bottom text-sm",e),...r})}));i.displayName="Table";let c=d.forwardRef(({className:e,...r},a)=>t.jsx("thead",{ref:a,className:(0,s.cn)("[&_tr]:border-b",e),...r}));c.displayName="TableHeader";let n=d.forwardRef(({className:e,...r},a)=>t.jsx("tbody",{ref:a,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...r}));n.displayName="TableBody",d.forwardRef(({className:e,...r},a)=>t.jsx("tfoot",{ref:a,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let o=d.forwardRef(({className:e,...r},a)=>t.jsx("tr",{ref:a,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...r}));o.displayName="TableRow";let l=d.forwardRef(({className:e,...r},a)=>t.jsx("th",{ref:a,className:(0,s.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r}));l.displayName="TableHead";let f=d.forwardRef(({className:e,...r},a)=>t.jsx("td",{ref:a,className:(0,s.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r}));f.displayName="TableCell",d.forwardRef(({className:e,...r},a)=>t.jsx("caption",{ref:a,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption"},44597:(e,r,a)=>{"use strict";a.d(r,{default:()=>d.a});var t=a(91561),d=a.n(t)},79906:(e,r,a)=>{"use strict";a.d(r,{default:()=>d.a});var t=a(34080),d=a.n(t)},91561:(e,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var a in r)Object.defineProperty(e,a,{enumerable:!0,get:r[a]})}(r,{default:function(){return n},getImageProps:function(){return c}});let t=a(20352),d=a(44401),s=a(15889),i=t._(a(99857));function c(e){let{props:r}=(0,d.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(r))void 0===a&&delete r[e];return{props:r}}let n=s.Image},76243:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o,metadata:()=>n});var t=a(72051),d=a(83074),s=a(89112),i=a(41288);let c=(0,a(45347).createProxy)(String.raw`/Users/obadosunmu/Documents/newcommerce/chooselifeandpeace/app/(root)/order/[id]/order-details-form.tsx#default`),n={title:`Order Details - ${s.iC}`},o=async({params:{id:e}})=>{let r=await (0,d.getOrderById)(e);return r||(0,i.notFound)(),t.jsx(c,{order:r})}},83074:(e,r,a)=>{"use strict";a.r(r),a.d(r,{$$ACTION_0:()=>h,createOrder:()=>x,getOrderById:()=>p});var t=a(94214);a(84674);var d=a(1779),s=a(6001),i=a(23829),c=a(41288),n=a(45315),o=a(9396),l=a(53117),f=a(29785),b=a(1192),u=a(37170),m=a(54772);async function p(e){return await o.Z.query.orders.findFirst({where:(0,f.eq)(l.orders.id,e),with:{orderItems:!0,user:{columns:{name:!0,email:!0}}}})}let x=(0,t.j)("62915f7c5455fffd80487d2ea4fe069934717803",h);async function h(){try{let e=await (0,d.I8)();if(!e)throw Error("User is not authenticated");let r=await (0,s.getMyCart)(),a=await (0,i.getUserById)(e?.user.id);r&&0!==r.items.length||(0,c.redirect)("/cart"),a.address||(0,c.redirect)("/shipping-address"),a.paymentMethod||(0,c.redirect)("/payment-method");let t=n.Mn.parse({userId:a.id,shippingAddress:a.address,paymentMethod:a.paymentMethod,itemsPrice:r.itemsPrice,shippingPrice:r.shippingPrice,taxPrice:r.taxPrice,totalPrice:r.totalPrice}),b=await o.Z.transaction(async e=>{let a=await e.insert(l.orders).values(t).returning();for(let t of r.items)await e.insert(l.orderItems).values({...t,price:t.price.toFixed(2),orderId:a[0].id});return await o.Z.update(l.carts).set({items:[],totalPrice:"0",shippingPrice:"0",taxPrice:"0",itemsPrice:"0"}).where((0,f.eq)(l.carts.id,r.id)),a[0].id});if(!b)throw Error("Order not created");(0,c.redirect)(`/order/${b}`)}catch(e){if((0,b.isRedirectError)(e))throw e;return{success:!1,message:(0,u.Z)(e)}}}(0,m.h)([p,x]),(0,t.j)("5a6d56e69c6fdbdbb96f5fcdf3cb938533d1c24c",p),(0,t.j)("ea248243752e282f1c9161e3241b42d6adba1007",x)}};var r=require("../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[329,390,542,104,955,343,298],()=>a(92190));module.exports=t})();